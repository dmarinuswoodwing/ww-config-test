(this["webpackJsonpdelete-recovery-assets-plugin"]=this["webpackJsonpdelete-recovery-assets-plugin"]||[]).push([[0],{159:function(e,t,n){"use strict";(function(e){var s=n(30),i=n(20),a=n(21),r=n(28),l=n(27),c=n(0),o=n.n(c),d=n(122),h=n(260),u=n(32),p=n(508),b=n(510),v=n(37),f=n(76),j=n(16),g=n.n(j),m=n(250),O=n(259),x=n(257),w=n(258),I=n(59),A=(n(502),n(77)),y=n.n(A),S=n(2);Object.defineProperty(Array.prototype,"chunk",{value:function(e){for(var t=0,n=[];t<this.length;)t%e===0&&n.push([]),n[n.length-1].push(this[t++]);return n}});var k=function(t){Object(r.a)(c,t);var n=Object(l.a)(c);function c(){var e;return Object(i.a)(this,c),(e=n.call(this)).csv=[],e.deletedByField=window.elvisContext.plugin.configProperties.deleted_by_field.value,e.deletedOnField=window.elvisContext.plugin.configProperties.deleted_on_field.value,e.trashPath=window.elvisContext.plugin.configProperties.trash_folder.value,e.apiUrl=window.elvisContext.plugin.configProperties.api.value,e.isAdmin=window.elvisContext.app.userProfile.isAdmin,e.userProfile=window.elvisContext.app.userProfile,e.text=window.elvisContext.plugin.messages,e.state={csv:[],downloadCSV:!1,selectedUserIndex:-1,isAdmin:!1,userList:[],dropdownList:[],user:{},expanded:[],checked:[],usersDeletes:[],totalAssets:[],selectedFolder:"",nodes:[],imageCollection:[],viewableImages:[],selectedAssets:[],isLoading:!0,currentPage:0,restoreFolderDisabled:!0,restoreAssetsDisabled:!0,showConfirm:!1,folderFileCount:0,modalAccentFunc:null,includeSubFolders:!0,showProgress:!1,jobProgress:0,jobProgressMax:0,showDownloadCSV:!1,level:0,selectedUser:null},e}return Object(a.a)(c,[{key:"componentDidMount",value:function(){var e=this;f.a.init(this.apiUrl,this.trashPath,this.deletedByField).then((function(){e.setState({user:e.userProfile,isAdmin:e.isAdmin},(function(){e.isAdmin?e.getUsers():e.getDeletes(e.userProfile.username)}))}))}},{key:"encode",value:function(t,n){var s=g.a.randomBytes(16),i=g.a.createCipheriv("aes-256-ctr",n,s),a=e.concat([i.update(t),i.final()]);return{iv:s.toString("hex"),content:a.toString("hex")}}},{key:"getUsers",value:function(){var e=this;I.a.init().then((function(){f.a.getUsers().then((function(t){var n=[];t.facets[e.deletedByField]&&(t.facets[e.deletedByField].forEach((function(t,s){n.push(Object(S.jsx)(d.a.Item,{onSelect:e.onDropdownSelect.bind(e,t,s),value:t.value,children:t.value}))})),e.setState({dropdownList:n,userList:t.facets[e.deletedByField],isLoading:!1}))})).catch((function(e){console.log({err:e})}))}))}},{key:"getDeletes",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=this.encode(JSON.stringify({user:e,count:i}),window.elvisContext.plugin.configProperties.key.value),r={index:a.iv,data:a.content};f.a.getDeletes(r).then((function(e){if(200==e.status)return e.json();alert(e.status)})).catch((function(e){console.log(e)})).then((function(e){var i=Object(s.a)(new Map(n.state.totalAssets.concat(e.hits).map((function(e){return[e.id,e]}))).values());if(t)n.setState({usersDeletes:e,totalAssets:i,currentPage:0},(function(){n.createTreeNodes(e.hits)}));else{var a=[{}];a[0].deletedOn=e.hits.map((function(e){return{value:e[n.deletedOnField].value,assetPath:e.path}})),n.setState({userList:a,usersDeletes:e,selectedUserIndex:0,totalAssets:i},(function(){n.createTreeNodes(e.hits)}))}}))}},{key:"createTreeNodes2",value:function(e){var t=[];e.forEach((function(e){for(var n=e.path.replace("".concat(window.elvisContext.plugin.configProperties.trash_folder.value,"/"),""),s=n.split("/"),i=s.length;i>=1;i-=1){var a=s[i];n=n.replace("/".concat(a),""),-1===t.indexOf(n)&&t.push(n)}-1===t.indexOf(n)&&t.push(n)}));var n=t.sort().reduce((function(e,t){return t.split("/").reduce((function(e,n,s){if(0===s)var i=e;else i=e.childrens=e.childrens||[];var a=i.find((function(e){return e.name===n.trim()}));return a||(a={type:"folder",path:t,name:n.trim(),label:n.trim()},i.push(a)),a}),e),e}),[]);return this.setState({nodes:n,expanded:t,isLoading:!1}),Promise.resolve()}},{key:"createTreeNodes",value:function(e){var t=[];return e.forEach((function(e){e.path=e.path.replace("".concat(window.elvisContext.plugin.configProperties.trash_folder.value,"/"),"");var n=e.path.split("/"),s=n.pop(),i=n.join("/"),a={level:e.path.split("/").length-1,path:e.path,name:s};i.length>0&&(a.parent=i),-1===t.indexOf(JSON.stringify(a))&&t.push(JSON.stringify(a));var r=e.path.split("/");r.pop();do{var l=r.pop(),c=r.join("/"),o=l;c.length>0&&(o="".concat(c,"/").concat(l));var d={level:r.length,path:o,name:l};c.length>0&&(d.parent=c),-1===t.indexOf(JSON.stringify(d))&&l&&t.push(JSON.stringify(d))}while(r.length>0)})),t=t.map((function(e){return JSON.parse(e)})),this.setState({nodes:t,isLoading:!1,level:0}),Promise.resolve()}},{key:"onImageChange",value:function(e){return e.length>0?this.setState({restoreAssetsDisabled:!1,selectedAssets:e}):this.setState({restoreAssetsDisabled:!0,selectedAssets:e}),!0}},{key:"onSelectAll",value:function(e){var t=[];this.state.selectedAssets.length===e.length?this.setState({selectedAssets:[],restoreAssetsDisabled:!0}):(e.forEach((function(e){t.push(e.props.id)})),this.setState({selectedAssets:t,restoreAssetsDisabled:!1}))}},{key:"confirmFolderRestore",value:function(){var e=this,t=this.state.selectedFolder,n=this.state.usersDeletes.hits.filter((function(n){return e.state.includeSubFolders?n.path.startsWith(t):n.path===t}));this.setState({showConfirm:!0,modalAccentFunc:this.onRestoreFolder.bind(this,t),folderFileCount:n.length,modalAssetsOrFolder:"folder"})}},{key:"onRestoreFolder",value:function(e){var t=this;this.setState({showConfirm:!1,showProgress:!0});var n=this.state.includeSubFolders,s=this.state.usersDeletes.hits.filter((function(t){if(!0===n){if(t.path.replace("".concat(window.elvisContext.plugin.configProperties.trash_folder.value,"/"),"").startsWith(e))return t}else if(t.path.replace("".concat(window.elvisContext.plugin.configProperties.trash_folder.value,"/"),"")===e)return t}));this.processResponse(s.chunk(5)).then((function(){var s=t.state.usersDeletes.hits.filter((function(t){if(!0===n){if(!t.path.replace("".concat(window.elvisContext.plugin.configProperties.trash_folder.value,"/"),"").startsWith(e))return t}else if(t.path.replace("".concat(window.elvisContext.plugin.configProperties.trash_folder.value,"/"),"")!==e)return t}));t.setState({usersDeletes:t.state.usersDeletes},(function(){t.createTreeNodes(s).then((function(){t.setState({showProgress:!1,selectedAssets:[]})}))}))}))}},{key:"confirmAssetRestore",value:function(e){this.setState({showConfirm:!0,modalAccentFunc:this.onRestoreAssets.bind(this,e),folderFileCount:e.length,modalAssetsOrFolder:"assets"})}},{key:"onRestoreAssets",value:function(e){var t=this;this.setState({showConfirm:!1,showProgress:!0});var n=this.state.totalAssets.filter((function(t){if(e.indexOf(t.id)>-1)return t}));this.processResponse(n.chunk(5)).then((function(){var n=t.state.usersDeletes.hits.filter((function(t){if(-1===e.indexOf(t.id))return t}));'ancestorPaths:"'.concat(window.elvisContext.plugin.configProperties.trash_folder.value,'" ').concat(t.deletedByField,':"').concat(t.state.user.username,'"'),"".concat(t.deletedOnField);t.state.usersDeletes.hits=n,t.setState({usersDeletes:t.state.usersDeletes},(function(){t.createTreeNodes(n).then((function(){t.setState({showProgress:!1,selectedAssets:[],currentPage:0})}))}))}))}},{key:"onSubFolderCheckboxChange",value:function(e){this.setState({includeSubFolders:!this.state.includeSubFolders,selectedAssets:[]})}},{key:"processResponse",value:function(e){var t=this;return this.setState({jobProgressMax:e.length,jobProgress:0}),new Promise((function(n,s){var i=e.map((function(e){return t.restoreAsset.bind(t,e)}));t.runQueue(i).then((function(){n()})).catch((function(e){s(e)}))}))}},{key:"buildQueue",value:function(e,t){var n=this;return e.map((function(e){return t.bind(n,e)}))}},{key:"runQueue",value:function(e){var t=this;return new Promise((function(n,s){e.length>0?e.shift().call().then((function(i){t.runQueue(e).then((function(){n()})).catch((function(e){s(e)}))})).catch((function(e){s(e)})):n()}))}},{key:"restoreAsset",value:function(e){var t=this;return new Promise((function(n,s){var i=t.encode(JSON.stringify({assetSelection:e,user:t.userProfile.username}),window.elvisContext.plugin.configProperties.key.value),a={index:i.iv,data:i.content};t.userProfile.username;f.a.restore(a).then((function(e){200===e.status?(t.setState((function(e,t){return{jobProgress:e.jobProgress+1}})),n()):s(e.status)})).catch((function(e){console.log(e)}))}))}},{key:"onDropdownSelect",value:function(e,t){var n=this;this.setState({isLoading:!0,selectedUserIndex:t});var s={q:'ancestorPaths:"'.concat(window.elvisContext.plugin.configProperties.trash_folder.value,'" ').concat(this.deletedByField,':"').concat(e.value,'"'),sort:"".concat(this.deletedOnField),num:5};this.getUserDeletes(s).then((function(s){if(s.totalHits>0){var i=n.state.userList,a=i[t].value;i[t].deletedOn=s.hits.map((function(e){return{value:e.metadata[n.deletedOnField].value,assetPath:e.metadata.assetPath}})),n.setState({userList:i,selectedUser:a},(function(){n.getDeletes(e.value,!0)}))}else n.setState({isLoading:!1})})).catch((function(e){console.log({err:e})}))}},{key:"getUserDeletes",value:function(e){return I.a.getUserDeletes(e)}},{key:"getAllUsersInfo",value:function(e,t){var n=this;return new Promise((function(s,i){if(0===e.length)s(t);else{var a={q:'ancestorPaths:"'.concat(window.elvisContext.plugin.configProperties.trash_folder.value,'" ').concat(n.deletedByField,':"').concat(e[0].value,'"'),sort:"".concat(n.deletedOnField),num:5};n.getUserDeletes(a).then((function(i){if(i.totalHits>0){var a={user:e[0].value,total:e[0].hitCount,deletedon1:"",deletedon2:"",deletedon3:"",deletedon4:"",deletedon5:"",assetpath1:"",assetpath2:"",assetpath3:"",assetpath4:"",assetpath5:""};i.hits.forEach((function(e,t){a["deletedon".concat(t+1)]=y()(e.metadata[n.deletedOnField].value).format(),a["assetpath".concat(t+1)]=e.metadata.assetPath})),t.push(a),e.shift(),n.getAllUsersInfo(e,t).then((function(){s(t)}))}else s([])}))}}))}},{key:"downloadCSV",value:function(e){var t=this;return this.csv=[],new Promise((function(e,n){var s=JSON.parse(JSON.stringify(t.state.userList));t.getAllUsersInfo(s,[]).then((function(n){t.csv=n,t.setState({csv:n,showDownloadCSV:!0},(function(){e()}))}))}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.level,s=t.restoreAssetsDisabled,i=t.showDownloadCSV,a=t.selectedUserIndex,r=t.userList,l=t.dropdownList,c=t.dropdownValue,f=t.isAdmin,j=t.jobProgressMax,g=t.jobProgress,I=t.showProgress,A=t.includeSubFolders,k=t.modalAssetsOrFolder,N=t.modalAccentFunc,W=t.folderFileCount,C=t.showConfirm,Z=t.nodes,D=(t.expanded,t.checked,t.selectedFolder),P=t.imageCollection,R=t.usersDeletes,G=t.selectedAssets,F=t.isLoading,Y=o.a.forwardRef((function(e,t){var n=e.children,s=e.onClick;return Object(S.jsx)("button",{class:"basic-btn-label",ref:t,onClick:function(e){e.preventDefault(),s(e)},children:Object(S.jsxs)("div",{style:{display:"flex"},children:[Object(S.jsx)("div",{children:n}),Object(S.jsx)("div",{style:{paddingLeft:"10px"},children:"\u25bc "})]})})})),M=o.a.forwardRef((function(t,n){var s=t.children,i=t.style,a=t.className,r=t["aria-labelledby"];return Object(S.jsxs)("div",{class:"dropdown-menu",ref:n,style:i,className:a,"aria-labelledby":r,children:[Object(S.jsx)("input",{autoFocus:!0,placeholder:"Search...",class:"trashcan-search mx-3 my-2 w-auto form-control",value:c,onChange:function(t){e.setState({dropdownValue:t.target.value})}}),Object(S.jsx)("ul",{className:"list-unstyled",children:o.a.Children.toArray(s).filter((function(e){return!c||e.props.children.toLowerCase().startsWith(c)}))})]})})),L=this.text["app.nothingFound"];return Object(S.jsxs)("div",{className:"app",children:[f?Object(S.jsxs)("div",{class:"trashcan-admin-bar",children:[Object(S.jsx)("div",{class:"trashcan-admin-bar-message",children:this.text["app.superuser"]}),Object(S.jsx)("div",{style:{height:"100%",borderRight:"1px solid #e2e2e2",margin:"0 0px 0 14px"}}),Object(S.jsxs)("div",{className:"user-selection",children:[Object(S.jsx)("div",{class:"basic-btn-title",children:this.text["app.selectedUser"]}),Object(S.jsx)("div",{class:"dropdown",children:Object(S.jsxs)(d.a,{drop:"right",children:[Object(S.jsx)(d.a.Toggle,{as:Y,variant:"primary",size:"sm",id:"dropdown-basic",children:Object(S.jsx)("div",{style:{fontWeight:"bold"},children:a>-1?r[a].value:this.text["app.selectUser"]})}),Object(S.jsx)(d.a.Menu,{as:M,children:l})]})}),Object(S.jsx)("button",{type:"button",class:"basic-btn outline",onClick:this.downloadCSV.bind(this),style:{height:"24px",marginLeft:"20px"},children:this.text["app.downloadCsv"]})]})]}):null,Object(S.jsx)("div",{class:"trashcan-top-bar",children:a>-1&&r[a].deletedOn?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{class:"trashcan-top-bar-message",children:Object(S.jsx)(h.a,{children:Object(S.jsx)(h.a.Check,{checked:A,custom:!0,onChange:this.onSubFolderCheckboxChange.bind(this),type:"checkbox",id:"sub-folder-checkbox",label:this.text["app.subfolders"]},"custom-checkbox")})}),Object(S.jsxs)("div",{className:"btn-toolbar right",children:[Object(S.jsx)("button",{className:"basic-btn",disabled:""===D,onClick:this.confirmFolderRestore.bind(this),style:{marginRight:"20px"},children:this.text["app.restoreFolder"]}),Object(S.jsx)("button",{className:"basic-btn",disabled:s,onClick:this.confirmAssetRestore.bind(this,G),children:this.text["app.restoreAssets"]})]})]}):null}),Object(S.jsxs)(v.a,{orientation:"horizontal",children:[Object(S.jsx)(v.b,{minSize:200,flex:1,style:{backgroundColor:"#F2F3F5"},children:Z.length>0?Object(S.jsx)(O.a,{level:n,data:Z,onClick:function(t){var n=R.hits.filter((function(e,n){return A?!!(e.path.startsWith(t)&&G.indexOf(e.id)>-1):e.path===t&&G.indexOf(e.id)>-1}));t!=D&&e.setState({selectedFolder:t,checked:[t],restoreFolderDisabled:!1,selectedAssets:n.map((function(e){return e.id})),restoreAssetsDisabled:0===n.map((function(e){return e.id})).length})}}):Object(S.jsx)("div",{className:"nothing-found",children:L})}),Object(S.jsx)(v.c,{style:{height:"4px",cursor:"ns-resize"}}),Object(S.jsx)(v.b,{minSize:300,flex:2,children:Object(S.jsx)(v.a,{children:Object(S.jsx)(v.b,{children:Object(S.jsxs)("div",{style:{height:"calc(100% - 34px)",overflow:"auto",backgroundColor:"#F5F6F8"},children:[Object(S.jsx)(m.a,{onSubFolderCheckboxChange:this.onSubFolderCheckboxChange.bind(this),onPageclick:this.getDeletes.bind(this),includeSubFolders:A,onRestoreFolder:this.confirmFolderRestore.bind(this),onRestoreAssets:this.confirmAssetRestore.bind(this),onChange:this.onImageChange.bind(this),onSelectAll:this.onSelectAll.bind(this),usersDeletes:R,currentPage:this.state.currentPage,selectedUser:this.state.selectedUser,selectedAssets:G,path:D}),P,Object(S.jsx)(x.a,{style:{backgroundColor:"gba(0, 0, 0, 0.8);"},fullPage:!0,loading:F,text:"Working, Please Wait."})]})})})})]}),Object(S.jsxs)(u.a,{show:C,onHide:function(){},size:"","aria-labelledby":"header-title",backdrop:"static",children:[Object(S.jsx)(u.a.Header,{children:Object(S.jsx)(u.a.Title,{style:{fontSize:"1.1em",fontWeight:"800"},children:this.text["recover.title"]})}),Object(S.jsxs)(u.a.Body,{children:["folder"===k?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"model-title-text",children:"Folder"}),Object(S.jsx)("div",{className:"modal-text",children:D}),Object(S.jsx)("div",{className:"model-title-text",children:this.text["recover.contains"]})]}):null,Object(S.jsxs)("div",{className:"modal-text",children:[W," ",this.text["text.files"]]}),Object(S.jsx)("div",{className:"model-title-text",children:this.text["text.areSure"]})]}),Object(S.jsx)(u.a.Footer,{children:Object(S.jsxs)(p.a,{children:[Object(S.jsx)("button",{className:"basic-btn",onClick:N,size:"sm",children:this.text["button.recover"]}),Object(S.jsx)("button",{className:"basic-btn",style:{marginLeft:"20px"},onClick:function(){e.setState({showConfirm:!1})},size:"sm",children:this.text["button.cancel"]})]})})]}),Object(S.jsxs)(u.a,{show:I,style:{padding:0},onHide:function(){},backdrop:"static",size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(S.jsx)(u.a.Header,{children:Object(S.jsx)(u.a.Title,{style:{fontSize:"1.1em",fontWeight:"800"},children:this.text["progress.recovering"]})}),Object(S.jsxs)(u.a.Body,{children:[Object(S.jsx)("p",{children:this.text["progress.message1"]}),Object(S.jsx)("div",{children:Object(S.jsx)(b.a,{style:{backgroundColor:"#0095e0!important"},now:g,max:j,label:"".concat(Math.floor(100*g/j),"%")})})]})]}),Object(S.jsxs)(u.a,{show:i,onHide:function(){e.setState({showDownloadCSV:!1})},size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(S.jsx)(u.a.Header,{children:Object(S.jsx)(u.a.Title,{style:{fontSize:"1.1em",fontWeight:"800"},children:Object(S.jsx)("div",{children:this.text["csv.title"]})})}),Object(S.jsxs)(u.a.Body,{children:[Object(S.jsx)("p",{children:this.text["csv.message1"]}),Object(S.jsx)("div",{children:Object(S.jsx)(w.CSVLink,{data:this.state.csv,filename:"delete_list-".concat(y()().format(),".csv"),onClick:function(){e.setState({showDownloadCSV:!1})},children:this.text["csv.button"]})})]})]})]})}}]),c}(c.PureComponent);t.a=k}).call(this,n(10).Buffer)},250:function(e,t,n){"use strict";var s=n(20),i=n(21),a=n(28),r=n(27),l=n(0),c=n.n(l),o=n(251),d=n(253),h=n.n(d),u=(n(76),n(159),n(497),n(2)),p=function(e){Object(a.a)(n,e);var t=Object(r.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).handlePageClick=function(e){var t=e.selected*i.assetsPerPage%i.props.usersDeletes.totalHits;i.props.selectedUser?i.props.onPageclick(i.props.selectedUser,i.isAdmin,t):i.props.onPageclick(i.userProfile.username,i.isAdmin,t),i.state.currentPage=0|e.selected},i.deletedByField=window.elvisContext.plugin.configProperties.deleted_by_field.value,i.deletedOnField=window.elvisContext.plugin.configProperties.deleted_on_field.value,i.trashPath=window.elvisContext.plugin.configProperties.trash_folder.value,i.text=window.elvisContext.plugin.messages,i.isAdmin=window.elvisContext.app.userProfile.isAdmin,i.userProfile=window.elvisContext.app.userProfile,i.currentPage=0,i.assetsPerPage=50,i.selectedUser="",i.state={currentPage:0,selectedAssets:[],includeSubFolders:!1,images:[],setItemOffset:0,itemOffset:0,selectedUser:""},i}return Object(i.a)(n,[{key:"imageSelect",value:function(e){var t=this,n=this.props.selectedAssets;n.indexOf(e)>-1?n=n.filter((function(t){return t!==e})):n.push(e),this.props.selectedAssets=n,this.setState({selectedAssets:n},(function(){t.props.onChange(n)}))}},{key:"compareValues",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(n,s){if(!n.hasOwnProperty(e)||!s.hasOwnProperty(e))return 0;var i="string"===typeof n[e]?n[e].toUpperCase():n[e],a="string"===typeof s[e]?s[e].toUpperCase():s[e],r=0;return i>a?r=1:i<a&&(r=-1),"desc"===t?-1*r:r}}},{key:"selectAllNone",value:function(){}},{key:"createStuff",value:function(){var e=this,t=this.props,n=t.usersDeletes,s=t.selectedAssets,i=t.path,a=[];n.hits&&(a=n.hits);var r=a.filter((function(t){if(1==e.props.includeSubFolders){if(t.path.replace("".concat(e.trashPath,"/"),"").startsWith(i))return t.selected=!1,t}else if(t.path.replace("".concat(e.trashPath,"/"),"")===i)return t.selected=!1,t}));r=r.sort(this.compareValues("value","asc"));var l=[];r.forEach((function(t){t.cf_deletedOn||(t.cf_deletedOn=""),l.push(Object(u.jsx)(o.a,{selected:s.indexOf(t.id)>-1,assetId:t.id,id:t.id,path:t.path.replace("".concat(e.trashPath,"/"),""),deletedOn:t.cf_deletedOn.value,filename:t.filename,W:!0,onSelect:e.imageSelect.bind(e,t.id)}))}));return l=l.slice(0,1e3).map((function(e){return e}))}},{key:"render",value:function(){var e=this.createStuff(!1),t=this.props,n=t.selectedAssets,s=(t.path,0),i=0,a=0;return this.props.usersDeletes.hits&&(s=this.props.usersDeletes.hits.length,a=(i=this.props.usersDeletes.totalHits)/this.assetsPerPage|0),Object(u.jsxs)("div",{className:"gallery-box",children:[Object(u.jsx)("div",{className:"status-bar ",children:Object(u.jsxs)("div",{className:"btn-toolbar",children:[Object(u.jsxs)("div",{style:{width:"200px"},children:[e.length," ",this.text["text.files"]," / ",n.length," ",this.text["text.selected"]]}),Object(u.jsx)("button",{className:"basic-btn outline",onClick:this.props.onSelectAll.bind(this,e),size:"sm",children:this.text["gallery.selectall"]})]})}),a>0&&Object(u.jsx)(h.a,{breakLabel:"...",nextLabel:"next >",onPageChange:this.handlePageClick,pageRangeDisplayed:this.assetsPerPage,pageCount:i/this.assetsPerPage,previousLabel:"< previous",renderOnZeroPageCount:null,className:"pagination"}),s>0&&Object(u.jsxs)("div",{class:"paginationText",children:[this.assetsPerPage*this.state.currentPage+1,"-",this.assetsPerPage*this.state.currentPage+1+s-1," (",this.props.usersDeletes.totalHits,")"]}),Object(u.jsx)("div",{className:"gallery-items",children:e})]})}}]),n}(c.a.Component);t.a=p},251:function(e,t,n){"use strict";(function(e){var s=n(20),i=n(21),a=n(28),r=n(27),l=n(0),c=n.n(l),o=n(77),d=n.n(o),h=n(261),u=n(509),p=n(252),b=n.n(p),v=(n(367),n(2)),f=(window.pluginSettings,n(369),n(16)),j=function(t){Object(a.a)(l,t);var n=Object(r.a)(l);function l(t){var i;return Object(s.a)(this,l),(i=n.call(this,t)).apiUrl=window.elvisContext.plugin.configProperties.api.value,i.text=window.elvisContext.plugin.messages,i.url=function(t,n,s){var i={id:t},a=function(t,n){var s=f.randomBytes(16),i="aes-256-ctr",a=f.createCipheriv(i,n,s),r=e.concat([a.update(t),a.final()]);return{iv:s.toString("hex"),content:r.toString("hex")}}(JSON.stringify(i),n.elvisContext.plugin.configProperties.key.value);return"".concat(n.location.protocol,"//").concat(n.location.host).concat(s,"/thumbnail?details=").concat(a.content,"&iv=").concat(a.iv)}(i.props.assetId,window,i.apiUrl),i}return Object(i.a)(l,[{key:"render",value:function(){var e="";this.props.selected&&(e="selected");var t=Object(v.jsx)(h.a,{style:{minWidth:"200px"},children:Object(v.jsxs)(h.a.Content,{children:[Object(v.jsx)("div",{className:"image-text-header-tooltip",children:this.text["thumb.filename"]}),Object(v.jsx)("div",{className:"image-text-tooltip",children:this.props.filename}),Object(v.jsx)("div",{className:"image-text-header-tooltip",children:this.text["thumb.deletedOn"]}),Object(v.jsx)("div",{className:"image-text-tooltip",children:d()(this.props.deletedOn).format("llll")}),Object(v.jsx)("div",{className:"image-text-header-tooltip",children:this.text["thumb.path"]}),Object(v.jsx)("div",{className:"image-text-tooltip",children:this.props.path})]})});"".concat(window.location.protocol,"//").concat(window.location.host).concat(this.apiUrl,"/thumbnail?id=").concat(this.props.assetId);return Object(v.jsx)(u.a,{placement:"auto",overlay:t,popperConfig:{modifiers:{applyStyles:!0,preventOverflow:{boundariesElement:"offsetParent",enabled:!1},hide:{enabled:!1}}},delay:{show:1e3,hide:200},children:Object(v.jsxs)("div",{id:this.props.assetId,className:"image-container ".concat(e),style:{cursor:"pointer"},onClick:this.props.onSelect.bind(this,this.props.assetId),children:[Object(v.jsx)("div",{className:"top-area",children:Object(v.jsx)(b.a,{height:109,offsetTop:100,children:Object(v.jsx)("div",{style:{height:"109px",width:"100%"},children:Object(v.jsx)("div",{class:"image",style:{backgroundImage:'url("'.concat(this.url,'")')}})})})}),Object(v.jsxs)("div",{className:"bottom-area",children:[Object(v.jsx)("p",{className:"image-text-header",children:this.text["thumb.filename"]}),Object(v.jsx)("p",{className:"image-text",children:this.props.filename}),Object(v.jsx)("p",{className:"image-text-header",children:this.text["thumb.deletedOn"]}),Object(v.jsx)("p",{className:"image-text",children:d()(this.props.deletedOn).format("llll")}),Object(v.jsx)("p",{className:"image-text-header",children:this.text["thumb.path"]}),Object(v.jsx)("p",{className:"image-text",children:this.props.path})]})]})})}}]),l}(c.a.Component);t.a=j}).call(this,n(10).Buffer)},259:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var s,i,a,r,l,c=n(100),o=n(80),d=n(0),h=n(81),u=n(37),p=n(261),b=n(509),v=n(2),f=void 0,j=h.a.div(s||(s=Object(o.a)(["\n  line-height: 1.5;\n  margin:0;\n  padding:10px;\n"]))),g=h.a.div(i||(i=Object(o.a)([" \n  margin-left: 5px;\n  cursor: pointer;  \n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis; \n"]))),m=h.a.img(a||(a=Object(o.a)(["\n  cursor: pointer;\n  ","\n"])),(function(e){if(e.isSelected&&e.isCurrentPath)return"filter:brightness(0)invert(1);"})),O=h.a.div(r||(r=Object(o.a)(["\n  padding: 0 10px;\n  height:25px;\n  line-height: 25px;    \n  font-size: 14px;\n  margin-bottom: 2px;\n  .folder--label {\n    display: flex;\n    align-items: center;\n    span {\n      margin-left: 5px;\n    }\n  }\n  \n  ","\n\n  border-radius: 5px;\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none; /* Safari */\n  -khtml-user-select: none; /* Konqueror HTML */\n  -moz-user-select: none; /* Old versions of Firefox */\n  -ms-user-select: none; /* Internet Explorer/Edge */\n  user-select: none; /* Non-prefixed version, currently supported by Chrome, Edge, Opera and Firefox *\n"])),(function(e){return e.isSelected&&e.isCurrentPath?"background-color:#0095E0;color:#ffffff;font-weight:bold; };":e.isSelected&&!e.isCurrentPath?"background-color:#DCDFE6;color:rgb(68,68,68); };":"color:rgb(68,68,68)"})),x=(h.a.div(l||(l=Object(o.a)(["\n  height: ",";\n  overflow: hidden;\n"])),(function(e){return e.isOpen?"auto":"0"})),function(e){var t=e.name,n=e.onSelect,s=e.path,i=e.level,a=e.selectedPath,r=e.currentLevel,l=Object(d.useState)(!0),o=Object(c.a)(l,2),h=o[0],u=o[1],j=function(e){e.preventDefault(),u(!h)},x=a[i]===s,w=i===r-1,I=Object(v.jsx)(p.a,{children:Object(v.jsx)(p.a.Content,{style:{backgroundColor:"black",color:"white"},children:Object(v.jsx)("div",{style:{backgroundColor:"black",color:"white"},children:t})})});return Object(v.jsx)(O,{isSelected:x,isCurrentPath:w,onClick:n.bind(f),children:Object(v.jsx)(b.a,{placement:"left",overlay:I,popperConfig:{modifiers:{preventOverflow:{enabled:!1},hide:{enabled:!1}}},delay:{show:1e3,hide:200},children:Object(v.jsxs)("div",{className:"folder--label",children:[a[i]===s?Object(v.jsx)(m,{isSelected:x,isCurrentPath:w,alt:"expand",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAABACAYAAACX+xC4AAAACXBIWXMAAC4jAAAuIwF4pT92AAAJYWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NjQ4LCAyMDIxLzAxLzEyLTE1OjUyOjI5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjIgKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTAyLTI4VDE4OjQxOjU2WiIgeG1wOk1vZGlmeURhdGU9IjIwMjEtMDItMjhUMTk6MjU6MDNaIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTAyLTI4VDE5OjI1OjAzWiIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpiY2M4NzNmYS1kYjlhLTQ4NDQtODcyZS00OWRiODlhYTE1OTMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1NWY1ZWVmZS0wOGM5LTEyNDItOGQ3My1hNDA5NzBhOGQxZmYiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyOWYxMmEwNC01ZDFlLTQ5ZjItOTU0Yi05Njg3MjBlNDBhOWEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjI5ZjEyYTA0LTVkMWUtNDlmMi05NTRiLTk2ODcyMGU0MGE5YSIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yOFQxODo0MTo1NloiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4yIChNYWNpbnRvc2gpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpkMmYzMGMzOS02YWU0LTRmOTctODNjOS02MDg5ZWY5MjJhOWMiIHN0RXZ0OndoZW49IjIwMjEtMDItMjhUMTk6MjBaIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMiAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YWU0ODQyMzMtMWY3NS00MWYxLWI5ZGEtNDFmZDNmZWRlYTY3IiBzdEV2dDp3aGVuPSIyMDIxLTAyLTI4VDE5OjI1OjAzWiIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjIgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJjYzg3M2ZhLWRiOWEtNDg0NC04NzJlLTQ5ZGI4OWFhMTU5MyIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yOFQxOToyNTowM1oiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphZTQ4NDIzMy0xZjc1LTQxZjEtYjlkYS00MWZkM2ZlZGVhNjciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjlmMTJhMDQtNWQxZS00OWYyLTk1NGItOTY4NzIwZTQwYTlhIiBzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MjlmMTJhMDQtNWQxZS00OWYyLTk1NGItOTY4NzIwZTQwYTlhIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+JIky8QAAA6FJREFUeNrt3FlIFVEcx/Gb0UbZQgkGFSVBe7aAFIEZREWRYbRgKhRCQtFGUJm0IUQLvURlIAb1UkYLUbQ9GLY99GJGK5VBGthm+2p1+588l/6e7J75jzN17/X38BV1xvvwEWY558wEAvuqA1Q/ai9V51HnqDT92YhHX4ZTb6igD60E8p/gV33CDjUT0I3BvzCcz9RajZQjLIuaQ+2k3hno84D9G/wVg1nj0QcPph4Z6LMB3gBex1AyPPzwQVQ1++wfVCaVGsWNpXp6CZ7t8X+0D1Xl8zniX/eU2hCp4Kqh1IcYQ1cVRSq4ahx1j/pEfYzS3jeBPjlSwVUdqWR93R9tDaMG6nPcXeZVEsngsdJy5nUa4P63inkdA7j/5QMc4AAHOMABDnCAAxwBHOAABzjAo7kVzKv0f4B3oBJbUJuN0UInf5PgBXgbajVVGcWTCm76yry+OfwbNVG/i2rnFjyFuhGD02Z+t9UNeH/qGfBcVSUFV8frK2z/o3raKUOvO0ENqQVRU6k86jXzOi4Fz2P7XsMVi6PzXA0zS5eCl7F9lwHU2gLmVUvFS8BHUt/1fi+pvgC1dobZFksvCzex/Q4D09FSP76oNVUC3p66jYWZotYxL3UJ3UoCnsb2eUJ1BmjY4qgKZlYgvdPczfbZA1BHS/tCXurOdIAEvAf1mO0zAaDWdjCvcungVTbbfv3XeABAw9XFWKKdKwU/ybavB6i1ucxL3WV2l4D3Zst06/UqUqCGr5R5HpSOhy9l284C05p6HOUtM5shBb/Ati0EqLVc5lXT5PkuDPgYfRgJ6n0SAWrtPLPcLp1i29KsubuWV7IxGzRKAq6GFe+z388CqLVC4/LZ0SRylt4wkf3uAW7lrbU1xpoKnIKHHtEuth6LEG+8MbGc5BR8uh4ZrGVPD6cA1FoRMzwlWZeixmwnGceiOICGrasx1pQpfda+hP2cD1BrWczrBdXNKbg6fGykHuqf1VPDQwBq7QgDPyRZ6qYO9pfZteQJYFpLCjR+/ckU6dpC/jz5fICKnkpWQ7KtpeBBNiufAFBrl5hZoZvVs6H2A9PaaOallo+MaA54OkCt8WUjFW7Xh6tu6jWEQP17nYxb+SXNAd8GUGvTjFn5Xm7B6/WxCajhO2CsIHb9Gr2LwLQWTz1vYoTV1Ysi7+gRQ1UOapRa872YusW8KvXxXATu96tQYzn5CuKAvy/7jeUWuTok6W+8fp11LFeuZ8RcnQN+ArEHWHK4MRugAAAAAElFTkSuQmCC",width:"18px",onClick:j}):Object(v.jsx)(m,{isSelected:x,isCurrentPath:w,alt:"expand",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAABACAYAAACX+xC4AAAACXBIWXMAAC4jAAAuIwF4pT92AAAJYWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NjQ4LCAyMDIxLzAxLzEyLTE1OjUyOjI5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjIgKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTAyLTI4VDE4OjQxOjU2WiIgeG1wOk1vZGlmeURhdGU9IjIwMjEtMDItMjhUMTk6MjU6NTlaIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTAyLTI4VDE5OjI1OjU5WiIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpjNzdiMTllYi1jYzhlLTQ2MzktODY0MS1jMGM5ZTI3NWFhMDEiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo4NGY5NGQ4Mi04MzNkLWUxNDYtOGY0Zi1jN2FkYjFmNWJkYTIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyOWYxMmEwNC01ZDFlLTQ5ZjItOTU0Yi05Njg3MjBlNDBhOWEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjI5ZjEyYTA0LTVkMWUtNDlmMi05NTRiLTk2ODcyMGU0MGE5YSIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yOFQxODo0MTo1NloiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4yIChNYWNpbnRvc2gpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpkMmYzMGMzOS02YWU0LTRmOTctODNjOS02MDg5ZWY5MjJhOWMiIHN0RXZ0OndoZW49IjIwMjEtMDItMjhUMTk6MjBaIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMiAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OGE2YWQ4YjYtNjU4NC00OTZkLWI0MGQtY2NlOTJiYTQyNDAzIiBzdEV2dDp3aGVuPSIyMDIxLTAyLTI4VDE5OjI1OjU5WiIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjIgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmM3N2IxOWViLWNjOGUtNDYzOS04NjQxLWMwYzllMjc1YWEwMSIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yOFQxOToyNTo1OVoiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4yIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4YTZhZDhiNi02NTg0LTQ5NmQtYjQwZC1jY2U5MmJhNDI0MDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjlmMTJhMDQtNWQxZS00OWYyLTk1NGItOTY4NzIwZTQwYTlhIiBzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MjlmMTJhMDQtNWQxZS00OWYyLTk1NGItOTY4NzIwZTQwYTlhIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+NchfmQAAAb9JREFUeNrt3DtLw2AAheHsTo4ugouoeJlFEAfB2eKFWp0FXbygVBGE/gQXXXQUdBAnwdFFcHBx0kXBTi4VsVZdjCcY8WsrhrZfJAnv8I4J4SGQpNDjOHt5R7WpHVWw1Kka8s+d6FzXrSnvoF71pNwQWga8Gvw8JOzvUoCXg78bOG9q3UeaqbGMmlBb6rkCfQrwH/BHAyZr6UK61F0F+jjgX+AFA2XU4sV0qrxx7g+VVoMxrl+12ASftnwHtKrbkJ8R/92D2owquFe3ekkYutd2VMG9BtSNelWlmFb8BX0kquBeTarPf++PWz2qw3/GXRteu1EGT0oLhtcJ4OG3angdAR5+a4DHGHwM0MCWbILPqmb6s5xN8KLF38STWskmONUW4HEDv1D76pCqOvBtrmyCp3gLCWzRJngG0MCyfPjwpQk44IADDjjggBPggAMOOOCAAw444AQ44IADDjjggAMOOAEOOOCAAw444IADToADDjjggAMOOOCAE+DJAU8DGtiK4XXc6IzeJKCBbTQKbg5FXvp/HfSGHWeoLG8Ec17dG165KE6hJrn2qI39Jrk5p84ZvTDmrJPcmRp26hyK/AStlH7ykYXagQAAAABJRU5ErkJggg==",width:"18px",onClick:j}),Object(v.jsx)(g,{isSelected:x,children:t})]})})})}),w=function(e){var t=e.data,n=e.onSelect,s=e.selectedPath,i=e.currentLevel;return t?(t=t.sort((function(e,t){var n=e.name.toUpperCase(),s=t.name.toUpperCase();return n<s?-1:n>s?1:void 0}))).map((function(e){return Object(v.jsx)(x,{name:e.name,path:e.path,level:e.level,onSelect:n.bind(f,e),selectedPath:s,currentLevel:i})})):Object(v.jsx)(v.Fragment,{})},I=function(e){for(var t,n=e.paths,s=e.onSelect,i=e.selectedPath,a=e.currentLevel,r=[],l=function(e){(t=0===e?n.filter((function(t){return t.level===e})):n.filter((function(t){return t.level===e&&t.parent===i[e-1]}))).length>0&&r.push({panel:Object(v.jsxs)(j,{children:[Object(v.jsx)(w,{data:t,level:e,onSelect:s.bind(f),selectedPath:i,currentLevel:a})," "]})})},c=0;c<=a;c+=1)l(c);return r};function A(e){var t=e.data,n=e.onClick,s=e.level,i=Object(d.useState)(t),a=Object(c.a)(i,2),r=a[0],l=a[1],o=Object(d.useState)({}),h=Object(c.a)(o,2),p=h[0],b=h[1],f=Object(d.useState)(s),j=Object(c.a)(f,2),g=j[0],m=j[1];r!==t&&(b({}),n(""),l(t));var O=function(e){var t=e.orientation,n=e.elements,s=[],i=[];return n.forEach((function(e,t){if(t===n.length-1){n.length;n.length<10?i.push(10-t):i.push(1)}else n.length>10?i.push(.5):i.push(1)})),n.map((function(e,t){t>0?s.push(Object(v.jsx)(u.c,{propagate:!0},t+"S"),Object(v.jsx)(u.b,{minSize:100,flex:i[t],children:e.panel},t+"E")):s.push(Object(v.jsxs)(u.b,{minSize:100,flex:i[t],children:[" ",e.panel]},t+"E"))})),Object(v.jsx)(u.a,{orientation:t,children:s})};return Object(v.jsx)(O,{orientation:"vertical",elements:I({paths:r,onSelect:function(e,t){t.preventDefault();var s=p;if(s[e.level]=e.path,b(s),e.level<g)for(var i=e.level+1;i<100;i+=1)delete p[i];m(e.level+1),n(e.path)},selectedPath:p,currentLevel:g})})}},273:function(e,t){},275:function(e,t){},284:function(e,t){},286:function(e,t){},312:function(e,t){},313:function(e,t){},318:function(e,t){},320:function(e,t){},327:function(e,t){},346:function(e,t){},367:function(e,t,n){},404:function(e,t){},497:function(e,t,n){},502:function(e,t,n){},506:function(e,t,n){},507:function(e,t,n){"use strict";n.r(t);n(0);var s=n(29),i=n.n(s),a=n(159);n(59),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(504),n(505),n(506);var r=n(2);window.elvisContext=window.elvisContext||parent.elvisContext||parent.getElvisContext(window)||{},console.log("".concat("delete-recovery-assets-plugin"," ").concat("1.4.0")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),i.a.render(Object(r.jsx)(a.a,{}),document.getElementById("root"))},59:function(e,t,n){"use strict";var s=n(113),i=n(249),a=n.n(i);t.a={serverUrl:"",resolvedLogin:null,_getFolderPath:function(){return window.elvisContext&&window.elvisContext.activeTab.folderSelection.length?window.elvisContext.activeTab.folderSelection[0].assetPath:"/"},_retrieveToken:function(){return fetch("/services/csrf",{credentials:"include"}).then((function(e){return e.json()}))},init:function(){var e=this;return this._retrieveToken().then((function(t){var n=t.csrfToken,s=n?{csrfToken:n}:{withCookie:!0};return e.folderPath=e._getFolderPath(),e.client=a.a.createClient(e.serverUrl),e.resolvedLogin=e.client.login(s),e.resolvedLogin})).catch((function(e){console.log(e)}))},waitForLogin:function(e){var t=this;return new Promise((function(n){t.resolvedLogin.then((function(){n(e())}))}))},browse:function(e){var t=Object(s.a)({includeAsset:!1},e);return this.waitForLogin(this.client.browse.bind(this.client,t))},search:function(e){return this.client.search({q:e})},getUserDeletes:function(e){return this.client.search(e)},getUsers:function(e){return this.client.search(e)}}},76:function(e,t,n){"use strict";(function(e){var s=n(113),i=n(59),a=n(16),r=window.pluginSettings;t.a={_token:"",_apitoken:"",setToken:function(e){this._token=e},setApiToken:function(e){this._apitoken=e},getToken:function(){return this._token},getApiToken:function(){return this._apitoken},getHeadersWithDefaults:function(e){var t={server_url:r.server_url,username:r.username,password:r.password},n=this.encode(JSON.stringify(t),window.elvisContext.plugin.configProperties.key.value),i=Object(s.a)({"X-CSRF-TOKEN":this._token,"Content-Type":"application/json","x-api-key":r.api_key,trashpath:r.trashpath,iv:n.iv,details:n.content},e);return""!==this._apitoken&&(i.Authorization="Bearer ".concat(this.getApiToken())),i},init:function(e,t,n){var s=this;return this.deletedByField=n,this.url=e,this.trashPath=t,new Promise((function(e,t){i.a._retrieveToken().then((function(t){s.setToken(t.csrfToken),e(t)})).catch((function(e){console.error(e)}))}))},sendDelete:function(e){var t=new Request("".concat(this.url,"/api/delete"),{method:"POST",body:JSON.stringify(e),headers:new Headers(this.getHeadersWithDefaults())});return fetch(t)},getDeletes:function(e){var t=new Request("".concat(this.url,"/delete/user_deletes"),{method:"POST",body:JSON.stringify(e),headers:new Headers(this.getHeadersWithDefaults())});return fetch(t)},getUsers:function(){var e={q:'ancestorPaths:"'.concat(this.trashPath,'"'),facets:this.deletedByField};return i.a.getUsers(e)},encode:function(t,n){var s=a.randomBytes(16),i=a.createCipheriv("aes-256-ctr",n,s),r=e.concat([i.update(t),i.final()]);return{iv:s.toString("hex"),content:r.toString("hex")}},restore:function(e){var t=new Request("".concat(this.url,"/restore"),{method:"POST",body:JSON.stringify(e),headers:new Headers(this.getHeadersWithDefaults())});return fetch(t)}}}).call(this,n(10).Buffer)}},[[507,1,2]]]);
//# sourceMappingURL=main.49e58410.chunk.js.map